<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'></meta>
    <link rel='stylesheet' type='text/css' href='statprofiler.css'></link>
    <title>StatProfilerHTML - /mnt/julia/packages/Zygote/ytjqm/src/compiler/interface2.jl</title>
  </head>
  <body>
    <div class='report-header'>
      <div class='backlink'>
        <a href='index.html'>Report index</a>
      </div>
      <div class='report-title'>
        StatProfilerHTML.jl report
      </div>
      <div class='generated-on'>
        Generated on Sat, 23 Apr 2022 11:46:57
      </div>
    </div>
    <table>
      <caption>File source code</caption>
      <thead>
        <tr>
          <th>Line</th>
          <th>Exclusive</th>
          <th>Inclusive</th>
          <th>Code</th>
        </tr>
      </thead>
      <tbody>
        <tr id='L1'>
          <td class='lineno'>1</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>ignore_sig&#40;T&#41; &#61; all&#40;T -&gt; T &lt;: Type, T.parameters&#41;</span>
          </td>
        </tr>
        <tr id='L2'>
          <td class='lineno'>2</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L3'>
          <td class='lineno'>3</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>function edge&#33;&#40;m::IRTools.Meta, edge::Core.MethodInstance&#41;</span>
          </td>
        </tr>
        <tr id='L4'>
          <td class='lineno'>4</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  m.code.edges &#61;&#61;&#61; nothing &amp;&amp; &#40;m.code.edges &#61; Core.MethodInstance&#91;&#93;&#41;</span>
          </td>
        </tr>
        <tr id='L5'>
          <td class='lineno'>5</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  push&#33;&#40;m.code.edges, edge&#41;</span>
          </td>
        </tr>
        <tr id='L6'>
          <td class='lineno'>6</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  return</span>
          </td>
        </tr>
        <tr id='L7'>
          <td class='lineno'>7</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>end</span>
          </td>
        </tr>
        <tr id='L8'>
          <td class='lineno'>8</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            <div class='call-sites'>
              259 &#40;80 &#37;&#41;
              samples spent in _pullback
              <br />
              
              11 &#40;4 &#37;&#41; &#40;incl.&#41;
              when called from _pullback
              <a href='#L2'>line 2</a>
              <br />
              
              230 &#40;89 &#37;&#41; &#40;incl.&#41;
              when called from _pullback
              <a href='interface.jl-670c675673ffd41fee3a52e9fe92021bdfa5056c.html#L34'>line 34</a>
              <br />
              
              7 &#40;3 &#37;&#41; &#40;incl.&#41;
              when called from _pullback
              <a href='normalize.jl-54faf954fade6429d77c6a327eb93ece08c068d5.html#L292'>line 292</a>
              <br />
              
              6 &#40;2 &#37;&#41; &#40;incl.&#41;
              when called from _pullback
              <a href='utils.jl-b185be80b23403397564206d4253a5b13d7bc2bd.html#L15'>line 15</a>
              <br />
              
              5 &#40;2 &#37;&#41; &#40;incl.&#41;
              when called from pullback
              <a href='interface.jl-670c675673ffd41fee3a52e9fe92021bdfa5056c.html#L40'>line 40</a>
              <br />
            </div>
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L9'>
          <td class='lineno'>9</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>3 &#40;1 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              3 &#40;1 &#37;&#41;
              samples spent in _pullback
              <br />
              
              3 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from _pullback
              <a href='nnlib.jl-38ea40240266fddcbd7c45500d4633bcc3391028.html#L98'>line 98</a>
              <br />
            </div>
            <div class='callees'>
              3 &#40;100 &#37;&#41;
              samples spent calling
              <a href='interface2.jl-2fbb0c9845b8b057a6fea4ddd8700cdbaf679e89.html#L0'>macro expansion</a>
              <br />
            </div>
            <span class='code'>@generated function _pullback&#40;ctx::AContext, f, args...&#41;</span>
          </td>
        </tr>
        <tr id='L10'>
          <td class='lineno'>10</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  # Try using ChainRulesCore</span>
          </td>
        </tr>
        <tr id='L11'>
          <td class='lineno'>11</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  if is_kwfunc&#40;f, args...&#41;</span>
          </td>
        </tr>
        <tr id='L12'>
          <td class='lineno'>12</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    # if it is_kw then &#96;args&#91;1&#93;&#96; are the keyword args, &#96;args&#91;2&#93;&#96; is actual function</span>
          </td>
        </tr>
        <tr id='L13'>
          <td class='lineno'>13</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    cr_T &#61; Tuple&#123;ZygoteRuleConfig&#123;ctx&#125;, args&#91;2:end&#93;...&#125;</span>
          </td>
        </tr>
        <tr id='L14'>
          <td class='lineno'>14</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    chain_rrule_f &#61; :chain_rrule_kw</span>
          </td>
        </tr>
        <tr id='L15'>
          <td class='lineno'>15</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  else</span>
          </td>
        </tr>
        <tr id='L16'>
          <td class='lineno'>16</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    cr_T &#61; Tuple&#123;ZygoteRuleConfig&#123;ctx&#125;, f, args...&#125;</span>
          </td>
        </tr>
        <tr id='L17'>
          <td class='lineno'>17</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    chain_rrule_f &#61; :chain_rrule</span>
          </td>
        </tr>
        <tr id='L18'>
          <td class='lineno'>18</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  end</span>
          </td>
        </tr>
        <tr id='L19'>
          <td class='lineno'>19</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L20'>
          <td class='lineno'>20</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>7 &#40;2 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              7 &#40;2 &#37;&#41;
              samples spent in #s3058#1219
              <br />
              
              7 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from #s3058#1219
              <a href='#L0'>line 0</a>
              <br />
            </div>
            <div class='callees'>
              7 &#40;100 &#37;&#41;
              samples spent calling
              <a href='chainrules.jl-5e7252f5ae52fbb28393b98d60669bb981d02869.html#L17'>has_chain_rrule</a>
              <br />
            </div>
            <span class='code'>  hascr, cr_edge &#61; has_chain_rrule&#40;cr_T&#41;</span>
          </td>
        </tr>
        <tr id='L21'>
          <td class='lineno'>21</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  hascr &amp;&amp; return :&#40;&#36;chain_rrule_f&#40;ZygoteRuleConfig&#40;ctx&#41;, f, args...&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L22'>
          <td class='lineno'>22</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L23'>
          <td class='lineno'>23</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  # No ChainRule, going to have to work it out.</span>
          </td>
        </tr>
        <tr id='L24'>
          <td class='lineno'>24</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  T &#61; Tuple&#123;f,args...&#125;</span>
          </td>
        </tr>
        <tr id='L25'>
          <td class='lineno'>25</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  ignore_sig&#40;T&#41; &amp;&amp; return :&#40;f&#40;args...&#41;, Pullback&#123;&#36;T&#125;&#40;&#40;&#41;&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L26'>
          <td class='lineno'>26</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L27'>
          <td class='lineno'>27</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  g &#61; try</span>
          </td>
        </tr>
        <tr id='L28'>
          <td class='lineno'>28</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>7 &#40;2 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              7 &#40;2 &#37;&#41;
              samples spent in #s3058#1219
              <br />
              
              7 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from #s3058#1219
              <a href='#L0'>line 0</a>
              <br />
            </div>
            <div class='callees'>
              7 &#40;100 &#37;&#41;
              samples spent calling
              <a href='emit.jl-17cac64c176d9d93b0f75ffcbf975220ecc8884a.html#L97'>_generate_pullback_via_decomposition</a>
              <br />
            </div>
            <span class='code'>    _generate_pullback_via_decomposition&#40;T&#41;</span>
          </td>
        </tr>
        <tr id='L29'>
          <td class='lineno'>29</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  catch e</span>
          </td>
        </tr>
        <tr id='L30'>
          <td class='lineno'>30</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    rethrow&#40;CompileError&#40;T,e&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L31'>
          <td class='lineno'>31</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  end</span>
          </td>
        </tr>
        <tr id='L32'>
          <td class='lineno'>32</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  g &#61;&#61;&#61; nothing &amp;&amp; return :&#40;f&#40;args...&#41;, Pullback&#123;&#36;T&#125;&#40;&#40;f,&#41;&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L33'>
          <td class='lineno'>33</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  meta, forw, _ &#61; g</span>
          </td>
        </tr>
        <tr id='L34'>
          <td class='lineno'>34</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  argnames&#33;&#40;meta, Symbol&#40;&quot;#self#&quot;&#41;, :ctx, :f, :args&#41;</span>
          </td>
        </tr>
        <tr id='L35'>
          <td class='lineno'>35</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  forw &#61; varargs&#33;&#40;meta, forw, 3&#41;</span>
          </td>
        </tr>
        <tr id='L36'>
          <td class='lineno'>36</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  # IRTools.verify&#40;forw&#41;</span>
          </td>
        </tr>
        <tr id='L37'>
          <td class='lineno'>37</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>1 &#40;0 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              1 &#40;0 &#37;&#41;
              samples spent in #s3058#1219
              <br />
              
              1 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from #s3058#1219
              <a href='#L0'>line 0</a>
              <br />
            </div>
            <div class='callees'>
              1 &#40;100 &#37;&#41;
              samples spent calling
              <a href='passes.jl-e46548b3f32cb930c4b191c71f87c345ae5cb507.html#L299'>pis&#33;</a>
              <br />
            </div>
            <span class='code'>  forw &#61; slots&#33;&#40;pis&#33;&#40;inlineable&#33;&#40;forw&#41;&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L38'>
          <td class='lineno'>38</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  # be ready to swap to using chainrule if one is declared</span>
          </td>
        </tr>
        <tr id='L39'>
          <td class='lineno'>39</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  cr_edge &#33;&#61; nothing &amp;&amp; edge&#33;&#40;meta, cr_edge&#41;</span>
          </td>
        </tr>
        <tr id='L40'>
          <td class='lineno'>40</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  return update&#33;&#40;meta.code, forw&#41;</span>
          </td>
        </tr>
        <tr id='L41'>
          <td class='lineno'>41</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>end</span>
          </td>
        </tr>
        <tr id='L42'>
          <td class='lineno'>42</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            <div class='call-sites'>
              20 &#40;6 &#37;&#41;
              samples spent in Pullback
              <br />
              
              4 &#40;20 &#37;&#41; &#40;incl.&#41;
              when called from Pullback
              <a href='utils.jl-b185be80b23403397564206d4253a5b13d7bc2bd.html#L15'>line 15</a>
              <br />
              
              2 &#40;10 &#37;&#41; &#40;incl.&#41;
              when called from #56
              <a href='interface.jl-670c675673ffd41fee3a52e9fe92021bdfa5056c.html#L41'>line 41</a>
              <br />
              
              1 &#40;5 &#37;&#41; &#40;incl.&#41;
              when called from Pullback
              <a href='broadcast.jl-0c4787d34135033fac9b8771c5fea237e93fce1e.html#L287'>line 287</a>
              <br />
              
              4 &#40;20 &#37;&#41; &#40;incl.&#41;
              when called from Pullback
              <a href='utils.jl-b185be80b23403397564206d4253a5b13d7bc2bd.html#L12'>line 12</a>
              <br />
              
              5 &#40;25 &#37;&#41; &#40;incl.&#41;
              when called from Pullback
              <a href='#L2'>line 2</a>
              <br />
              
              4 &#40;20 &#37;&#41; &#40;incl.&#41;
              when called from Pullback
              <a href='normalize.jl-54faf954fade6429d77c6a327eb93ece08c068d5.html#L292'>line 292</a>
              <br />
            </div>
            
            <span class='code'></span>
          </td>
        </tr>
        <tr id='L43'>
          <td class='lineno'>43</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>@generated function &#40;j::Pullback&#123;T&#125;&#41;&#40;Δ&#41; where T</span>
          </td>
        </tr>
        <tr id='L44'>
          <td class='lineno'>44</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  ignore_sig&#40;T&#41; &amp;&amp; return :nothing</span>
          </td>
        </tr>
        <tr id='L45'>
          <td class='lineno'>45</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  g &#61; try</span>
          </td>
        </tr>
        <tr id='L46'>
          <td class='lineno'>46</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>1 &#40;0 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              1 &#40;0 &#37;&#41;
              samples spent in #s3058#1220
              <br />
              
              1 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from #s3058#1220
              <a href='#L0'>line 0</a>
              <br />
            </div>
            <div class='callees'>
              1 &#40;100 &#37;&#41;
              samples spent calling
              <a href='emit.jl-17cac64c176d9d93b0f75ffcbf975220ecc8884a.html#L97'>_generate_pullback_via_decomposition</a>
              <br />
            </div>
            <span class='code'>    _generate_pullback_via_decomposition&#40;T&#41;</span>
          </td>
        </tr>
        <tr id='L47'>
          <td class='lineno'>47</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  catch e</span>
          </td>
        </tr>
        <tr id='L48'>
          <td class='lineno'>48</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    rethrow&#40;CompileError&#40;T,e&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L49'>
          <td class='lineno'>49</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  end</span>
          </td>
        </tr>
        <tr id='L50'>
          <td class='lineno'>50</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  if g &#61;&#61;&#61; nothing</span>
          </td>
        </tr>
        <tr id='L51'>
          <td class='lineno'>51</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    Δ &#61;&#61; Nothing &amp;&amp; return :nothing</span>
          </td>
        </tr>
        <tr id='L52'>
          <td class='lineno'>52</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>    return :&#40;error&#40;&quot;Non-differentiable function &#36;&#40;repr&#40;j.t&#91;1&#93;&#41;&#41;&quot;&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L53'>
          <td class='lineno'>53</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  end</span>
          </td>
        </tr>
        <tr id='L54'>
          <td class='lineno'>54</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  meta, _, back &#61; g</span>
          </td>
        </tr>
        <tr id='L55'>
          <td class='lineno'>55</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  argnames&#33;&#40;meta, Symbol&#40;&quot;#self#&quot;&#41;, :Δ&#41;</span>
          </td>
        </tr>
        <tr id='L56'>
          <td class='lineno'>56</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  # IRTools.verify&#40;back&#41;</span>
          </td>
        </tr>
        <tr id='L57'>
          <td class='lineno'>57</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>  back &#61; slots&#33;&#40;inlineable&#33;&#40;back&#41;&#41;</span>
          </td>
        </tr>
        <tr id='L58'>
          <td class='lineno'>58</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'>1 &#40;0 &#37;&#41;</td>
          <td>
            <div class='call-sites'>
              1 &#40;0 &#37;&#41;
              samples spent in #s3058#1220
              <br />
              
              1 &#40;100 &#37;&#41; &#40;incl.&#41;
              when called from #s3058#1220
              <a href='#L0'>line 0</a>
              <br />
            </div>
            <div class='callees'>
              1 &#40;100 &#37;&#41;
              samples spent calling
              <a href='utils.jl-9c768201bf57a8f20b6cc76e13b695b0f21e02a6.html#L147'>update&#33;</a>
              <br />
            </div>
            <span class='code'>  return update&#33;&#40;meta.code, back&#41;</span>
          </td>
        </tr>
        <tr id='L59'>
          <td class='lineno'>59</td>
          <td class='tracecount excl'></td>
          <td class='tracecount incl'></td>
          <td>
            
            
            <span class='code'>end</span>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>

